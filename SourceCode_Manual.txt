============================================================================
           TXT Editor 原始碼功能完整使用手冊 (深度解析版)
============================================================================
版本：2.6.87
作者：Antigravity
日期：2026-01-26

本手冊為開發者與進階使用者提供 TXT Editor 專案中各個 Python 檔案的詳細功能解析，
包含各組件的進階機制（如書籤位移補償、多游標編輯邏輯、自動區塊選取等）。

----------------------------------------------------------------------------
一、 核心框架與主視窗 (Core & MainWindow)
----------------------------------------------------------------------------

1. main.py (程式入口)
   - 核心功能：應用程式生命週期管理與單一實例控制。
   - 深度細節：
     * 單一實例機制 (SingleApplication)：利用系統級 Locial Socket 建立鎖定。若偵測到同專案已開啟，會將指令參數傳送至現有實體並喚醒視窗。

2. editor_window.py (主視窗控制器)
   - 深度功能解析：
     * 符號雙擊自動選取 (on_function_double_clicked)：
       - Python：根據「初始縮排量」判斷。從定義行開始，向下尋找直到遇到「縮排量小於或等於初始值」且非空行的行，選取該範圍。
       - C++：根據「大括號配對」判斷。自動尋找定義後的首個 `{`，並精確計算 `{}` 的配對巢狀深度，直到找到對應的 `}`，選取完整區塊。針對宏定義 (Define) 則支援反斜線 `\` 續行偵測。
     * 檔案監控邏輯：即時檢查檔案修改時間 (mtime)，外部更動時彈出重新載入詢問框。
     * 背景掃描 (SymbolScannerWorker)：持續掃描專案檔案，提取符號定義並預存代碼片段於 RAM。

----------------------------------------------------------------------------
二、 程式碼編輯器進階行為 (Advanced Editor Logic)
----------------------------------------------------------------------------

3. code_editor.py (核心編輯組件)
   - 深度細節：
     * 多點/多重游標編輯 (Multi-cursor)：
       - 觸發：Ctrl + 滑鼠左鍵點擊。
       - 邏輯：維護一個額外游標列表 (extra_cursors)。所有的編輯動作（輸入文字、Delete、Backspace、貼上、Tab 縮排）都會透過 `beginEditBlock()` 包裝，同步套用到所有游標位置，支援多點同步開發。
       - 清除：Esc 鍵可撤銷所有額外游標。
     * 智能跳轉：支援點擊識別符識別 `variable.member` 等鏈式結構，並結合 `_find_variable_type` 進行型別推導與定義查詢。
     * 效能防護：大型檔案自動切換為「可見區域高亮模式 (Deferred Mode)」，避免全文掃描卡頓。

4. line_number_area.py (行號渲染)
   - 整合書籤狀態顯示，繪製紅色矩形/標記。

----------------------------------------------------------------------------
三、 配置與設定管理 (Configuration Systems)
----------------------------------------------------------------------------

5. settings_dialog.py (Configure1 - 基礎設定與配色)
   - 功能：管理視覺主題與配色。
   - 項目：主題切換 (Dark/Light/Gray)、字型選擇、字號、Tab 寬度、空格替換 Tab。
   - 細部配色：支援包括關鍵字、運算子、函數、各層級變數、背景色及選取色等 30+ 項顏色的即時自訂。

6. settings2_dialog.py (Configure2 - 進階行為設定)
   - 顯示類：行號開關、定義預覽視窗開關、高亮效能門檻。
   - 書籤類：設定書籤自動位移補償的搜尋範圍 (Relocation Range)。
   - 自動化類：開啟「自動貼上並最小化」功能、設定貼上後是否自動 Enter、自訂貼上快捷鍵。
   - 專案類：設定該專案專屬的「執行指令 (Run Command)」，如 `python main.py`，該設定隨專案記憶。

7. settings3_dialog.py (Configure3 - 文字巨集 Macros)
   - 功能：提供 3 組自訂文字巨集。
   - 項目：使用者可直接輸入一段常用代碼片段（如版權聲明、Code Template），並為每一組指定專屬的快捷鍵進行一鍵插入。

----------------------------------------------------------------------------
四、 專案與導覽系統 (Project Ecosystem)
----------------------------------------------------------------------------

8. project_bookmarks.py (專案書籤)
   - 支援群組管理 (Grouping)，以及基於內容識別的位移自動修正功能。

9. function_list_window.py (符號清單)
   - 樹狀/清單顯示檔案內部結構。雙擊項目可觸發 `editor_window` 的區塊選取邏輯。

10. highlight_scrollbar.py (視覺化導航)
    - 在捲動軸映射目前的選取單字出現位置。

----------------------------------------------------------------------------
五、 輔助工具類 (Auxiliary Tools)
----------------------------------------------------------------------------

11. hex_editor_window.py：支援大型檔案的虛擬列表 Hex 視圖。
12. calculator_window.py：支援多進制轉換與補數運算的專業計算機。
13. file_history.py：自動存檔快照與版本對比系統。
14. linux_command_manual.py：內建指令檢索手冊。

============================================================================
              TXT Editor - 深度功能手冊 (END)
============================================================================
